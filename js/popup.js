function wait(e){return new Promise(function(t){setTimeout(t,e)})}var port=chrome.extension.connect({name:"WPintel connection"});function setdetails(e){window.detailstate=!0;try{e[1].endsWith("/")?window.targeturl=e[1].replace(/.$/,""):window.targeturl=e[1],window.sourcecode=e[2],window.parsedsrc=(new DOMParser).parseFromString(window.sourcecode,"text/html"),window.isWP=e[0]}catch(e){wpintel_debug("Something wrong with what content.js sent: "+e)}}function getDetails(){port.postMessage("sendDetails"),chrome.tabs.query({active:!0,currentWindow:!0},function(e){chrome.tabs.sendMessage(e[0].id,{from:"popup",subject:"sendDetails"},setdetails)})}port.onMessage.addListener(function(e){"details"===e[0]&&(wpintel_debug("got details form back"),window.tabID=e[1],"yes"!==window.isWP&&(wpintel_debug("setting isWP to ture by httph: "+e[3]),window.isWP=e[3]),window.http_headers=e[5])}),document.addEventListener("DOMContentLoaded",function(e){getDetails(),setTimeout(function(){if(void 0!==window.detailstate){if(void 0===window.targeturl){document.getElementById("target").value="Reload or Enter Manually",show_reload();var e=chrome.extension.getBackgroundPage();return e.activateIcon("0"),!1}if(document.getElementById("target").value=window.targeturl,"yes"===window.isWP){wpintel_debug("WordPress installation detected");var e=chrome.extension.getBackgroundPage();e.activateIcon("1"),wordpress_fond(),document.addEventListener("click",function(e){e.target&&"path_scan"==e.target.id?(wpintel_debug("Path disclosure check"),check_path(window.targeturl)):e.target&&"version_scan"==e.target.id?(wpintel_debug("clicked on start scan"),check_version(window.sourcecode,window.parsedsrc,window.targeturl)):e.target&&"theme_scan"==e.target.id?(wpintel_debug("Themes and plugin check"),check_theme(window.sourcecode,window.parsedsrc)):e.target&&"reg_scan"==e.target.id?(wpintel_debug("User registration status check"),check_reg(window.targeturl)):e.target&&"user_scan"==e.target.id&&(wpintel_debug("Username Enumeration"),check_users(window.targeturl))})}else{var e=chrome.extension.getBackgroundPage();e.activateIcon("0"),wpintel_debug("WordPress installation not detected"),wordpress_not_found()}}else{var e=chrome.extension.getBackgroundPage();e.activateIcon("0"),wpintel_debug("window.detailstate not set"),show_error("<b>Oops!!!</b><br>Something went wrong.. try refreshing the page")}},500)}),document.addEventListener("click",function(e){if(e.target&&"change_target"==e.target.id){wpintel_debug("Target Changed");var t=document.getElementById("target").value;""!==t&&"Reload or Enter Manually"!==t&&(port.postMessage("Redirect[to]"+t),window.close())}else e.target&&"ret_menu"==e.target.id?wordpress_fond():e.target&&"donate_but"==e.target.id&&donate()}),$(document).ready(function(){$("body").on("click","a",function(){return chrome.tabs.create({url:$(this).attr("href")}),!1}),document.querySelector("body").addEventListener("click",function(e){"relaod_but"===e.target.id&&(wpintel_debug("Pressed the reload button"),chrome.tabs.reload(window.tabID),window.close())})});var _AnalyticsCode="UA-62536809-6";const version=chrome.runtime.getManifest().version;var _gaq=_gaq||[];function trackButtonClick(e){_gaq.push(["_trackEvent",e.target.id,"clicked","Ext version: "+version])}_gaq.push(["_setAccount",_AnalyticsCode]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://ssl.google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),document.addEventListener("DOMContentLoaded",function(){for(var e=document.querySelectorAll("button"),t=0;t<e.length;t++)e[t].addEventListener("click",trackButtonClick)});