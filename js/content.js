function DOMtoString(e){for(var o="",i=e.firstChild;i;){switch(i.nodeType){case Node.ELEMENT_NODE:o+=i.outerHTML;break;case Node.TEXT_NODE:o+=i.nodeValue;break;case Node.CDATA_SECTION_NODE:o+="<![CDATA["+i.nodeValue+"]]>";break;case Node.COMMENT_NODE:o+="\x3c!--"+i.nodeValue+"--\x3e";break;case Node.DOCUMENT_TYPE_NODE:o+="<!DOCTYPE "+i.name+(i.publicId?' PUBLIC "'+i.publicId+'"':"")+(!i.publicId&&i.systemId?" SYSTEM":"")+(i.systemId?' "'+i.systemId+'"':"")+">\n"}i=i.nextSibling}return o}window.onload=function(){wpintel_debug("page load!"),document.documentElement.outerHTML.match(/<(img|link|script) [^>]+wp-content/i)?(wpintel_debug("WordPress Detected"),window.iswp="yes",window.sourcecode=(new XMLSerializer).serializeToString(document),window.targeturl=window.location.href,chrome.runtime.sendMessage({action:"yes",site_url:window.location.href,site_html:(new XMLSerializer).serializeToString(document)})):(wpintel_debug("WordPress NOT Detected"),window.iswp="no",window.sourcecode=(new XMLSerializer).serializeToString(document),window.targeturl=window.location.href,chrome.runtime.sendMessage({action:"no",site_url:window.location.href,site_html:(new XMLSerializer).serializeToString(document)}))},chrome.runtime.onMessage.addListener(function(e,o,i){"popup"===e.from&&"sendDetails"===e.subject&&(wpintel_debug("Connection from popup.js"),i([window.iswp,window.targeturl,window.sourcecode]))});