function DOMtoString(e){for(var t="",i=e.firstChild;i;){switch(i.nodeType){case Node.ELEMENT_NODE:t+=i.outerHTML;break;case Node.TEXT_NODE:t+=i.nodeValue;break;case Node.CDATA_SECTION_NODE:t+="<![CDATA["+i.nodeValue+"]]>";break;case Node.COMMENT_NODE:t+="\x3c!--"+i.nodeValue+"--\x3e";break;case Node.DOCUMENT_TYPE_NODE:t+="<!DOCTYPE "+i.name+(i.publicId?' PUBLIC "'+i.publicId+'"':"")+(!i.publicId&&i.systemId?" SYSTEM":"")+(i.systemId?' "'+i.systemId+'"':"")+">\n"}i=i.nextSibling}return t}window.onload=function(){var e=window.location.hostname;wpintel_debug("page load! domain: "+e);for(var t=!1,i=document.querySelectorAll("[src],[href]"),o=0;o<i.length;++o){var n=i[o];if(null!==n.getAttribute("src"))var r=n.getAttribute("src");if(null!==n.getAttribute("href"))r=n.getAttribute("href");var d=new RegExp("(http://|https://|)("+e+"|/|)(.*?)wp-(content|include)");if(r.match(d)){t=!0;break}}!0===t?(wpintel_debug("WordPress Detected"),window.iswp="yes",window.sourcecode=(new XMLSerializer).serializeToString(document),window.targeturl=window.location.href,chrome.runtime.sendMessage({action:"yes",site_url:window.location.href,site_html:(new XMLSerializer).serializeToString(document)})):(wpintel_debug("WordPress NOT Detected"),window.iswp="no",window.sourcecode=(new XMLSerializer).serializeToString(document),window.targeturl=window.location.href,chrome.runtime.sendMessage({action:"no",site_url:window.location.href,site_html:(new XMLSerializer).serializeToString(document)}))},chrome.runtime.onMessage.addListener(function(e,t,i){"popup"===e.from&&"sendDetails"===e.subject&&(wpintel_debug("Connection from popup.js"),i([window.iswp,window.targeturl,window.sourcecode]))});